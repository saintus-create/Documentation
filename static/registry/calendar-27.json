{
	"$schema": "https://shadcn-svelte.com/schema/registry-item.json",
	"name": "calendar-27",
	"type": "registry:block",
	"devDependencies": [
		"@lucide/svelte@^0.544.0",
		"layerchart@2.0.0-next.27",
		"bits-ui@^2.11.0",
		"@internationalized/date@^3.8.1",
		"d3-scale@^4.0.2",
		"@types/d3-scale@^4.0.8"
	],
	"registryDependencies": [
		"chart",
		"card",
		"popover",
		"button",
		"range-calendar"
	],
	"files": [
		{
			"content": "<script lang=\"ts\">\n\timport CalendarIcon from \"@lucide/svelte/icons/calendar\";\n\timport * as Chart from \"$UI$/chart/index.js\";\n\timport * as Card from \"$UI$/card/index.js\";\n\timport * as Popover from \"$UI$/popover/index.js\";\n\timport { Button } from \"$UI$/button/index.js\";\n\timport { BarChart, Highlight, type ChartContextValue } from \"layerchart\";\n\timport RangeCalendar from \"$UI$/range-calendar/range-calendar.svelte\";\n\timport type { DateRange } from \"bits-ui\";\n\timport { CalendarDate, getLocalTimeZone } from \"@internationalized/date\";\n\timport { scaleBand } from \"d3-scale\";\n\timport { cubicInOut } from \"svelte/easing\";\n\n\tlet value = $state<DateRange | undefined>({\n\t\tstart: new CalendarDate(2025, 6, 5),\n\t\tend: new CalendarDate(2025, 6, 20),\n\t});\n\n\tconst chartData = [\n\t\t{ date: new Date(\"2025-06-01\"), visitors: 178 },\n\t\t{ date: new Date(\"2025-06-02\"), visitors: 470 },\n\t\t{ date: new Date(\"2025-06-03\"), visitors: 103 },\n\t\t{ date: new Date(\"2025-06-04\"), visitors: 439 },\n\t\t{ date: new Date(\"2025-06-05\"), visitors: 88 },\n\t\t{ date: new Date(\"2025-06-06\"), visitors: 294 },\n\t\t{ date: new Date(\"2025-06-07\"), visitors: 323 },\n\t\t{ date: new Date(\"2025-06-08\"), visitors: 385 },\n\t\t{ date: new Date(\"2025-06-09\"), visitors: 438 },\n\t\t{ date: new Date(\"2025-06-10\"), visitors: 155 },\n\t\t{ date: new Date(\"2025-06-11\"), visitors: 92 },\n\t\t{ date: new Date(\"2025-06-12\"), visitors: 492 },\n\t\t{ date: new Date(\"2025-06-13\"), visitors: 81 },\n\t\t{ date: new Date(\"2025-06-14\"), visitors: 426 },\n\t\t{ date: new Date(\"2025-06-15\"), visitors: 307 },\n\t\t{ date: new Date(\"2025-06-16\"), visitors: 371 },\n\t\t{ date: new Date(\"2025-06-17\"), visitors: 475 },\n\t\t{ date: new Date(\"2025-06-18\"), visitors: 107 },\n\t\t{ date: new Date(\"2025-06-19\"), visitors: 341 },\n\t\t{ date: new Date(\"2025-06-20\"), visitors: 408 },\n\t\t{ date: new Date(\"2025-06-21\"), visitors: 169 },\n\t\t{ date: new Date(\"2025-06-22\"), visitors: 317 },\n\t\t{ date: new Date(\"2025-06-23\"), visitors: 480 },\n\t\t{ date: new Date(\"2025-06-24\"), visitors: 132 },\n\t\t{ date: new Date(\"2025-06-25\"), visitors: 141 },\n\t\t{ date: new Date(\"2025-06-26\"), visitors: 434 },\n\t\t{ date: new Date(\"2025-06-27\"), visitors: 448 },\n\t\t{ date: new Date(\"2025-06-28\"), visitors: 149 },\n\t\t{ date: new Date(\"2025-06-29\"), visitors: 103 },\n\t\t{ date: new Date(\"2025-06-30\"), visitors: 446 },\n\t];\n\n\tconst total = chartData.reduce((acc, curr) => acc + curr.visitors, 0);\n\n\tconst chartConfig = {\n\t\tvisitors: {\n\t\t\tlabel: \"Visitors\",\n\t\t\tcolor: \"var(--color-primary)\",\n\t\t},\n\t} satisfies Chart.ChartConfig;\n\n\tconst filteredData = $derived.by(() => {\n\t\tif (!value?.start || !value?.end) return chartData;\n\t\treturn chartData.filter(({ date }) => {\n\t\t\tconst dateObj = new Date(date);\n\t\t\tif (!value) return true;\n\t\t\tconst startDate = value.start!.toDate(getLocalTimeZone());\n\t\t\tconst endDate = value.end!.toDate(getLocalTimeZone());\n\t\t\t// set end date to end of day to include the full day\n\t\t\tendDate.setHours(23, 59, 59, 999);\n\t\t\treturn dateObj >= startDate && dateObj <= endDate;\n\t\t});\n\t});\n\n\tlet context = $state<ChartContextValue>();\n</script>\n\n<Card.Root class=\"@container/card w-full max-w-xl\">\n\t<Card.Header class=\"@md/card:grid flex flex-col border-b\">\n\t\t<Card.Title>Web Analytics</Card.Title>\n\t\t<Card.Description>Showing total visitors for this month.</Card.Description>\n\t\t<Card.Action class=\"@md/card:mt-0 mt-2\">\n\t\t\t<Popover.Root>\n\t\t\t\t<Popover.Trigger>\n\t\t\t\t\t{#snippet child({ props })}\n\t\t\t\t\t\t<Button {...props} variant=\"outline\">\n\t\t\t\t\t\t\t<CalendarIcon />\n\t\t\t\t\t\t\t{value?.start && value?.end\n\t\t\t\t\t\t\t\t? `${value.start.toDate(getLocalTimeZone()).toLocaleDateString()} - ${value.end.toDate(getLocalTimeZone()).toLocaleDateString()}`\n\t\t\t\t\t\t\t\t: \"June 2025\"}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t{/snippet}\n\t\t\t\t</Popover.Trigger>\n\t\t\t\t<Popover.Content class=\"w-auto overflow-hidden p-0\" align=\"end\">\n\t\t\t\t\t<RangeCalendar\n\t\t\t\t\t\tclass=\"w-full\"\n\t\t\t\t\t\tfixedWeeks\n\t\t\t\t\t\tbind:value\n\t\t\t\t\t\tminValue={new CalendarDate(2025, 6, 1)}\n\t\t\t\t\t\tmaxValue={new CalendarDate(2025, 6, 31)}\n\t\t\t\t\t/>\n\t\t\t\t</Popover.Content>\n\t\t\t</Popover.Root>\n\t\t</Card.Action>\n\t</Card.Header>\n\t<Card.Content class=\"px-4\">\n\t\t<Chart.Container config={chartConfig} class=\"aspect-auto h-[250px] w-full\">\n\t\t\t<BarChart\n\t\t\t\tbind:context\n\t\t\t\tdata={filteredData}\n\t\t\t\txScale={scaleBand().padding(0.25)}\n\t\t\t\tx=\"date\"\n\t\t\t\taxis=\"x\"\n\t\t\t\ty=\"visitors\"\n\t\t\t\tprops={{\n\t\t\t\t\tbars: {\n\t\t\t\t\t\tstroke: \"none\",\n\t\t\t\t\t\trounded: \"all\",\n\t\t\t\t\t\tradius: 4,\n\t\t\t\t\t\t// use the height of the chart to animate the bars\n\t\t\t\t\t\tinitialY: context?.height,\n\t\t\t\t\t\tinitialHeight: 0,\n\t\t\t\t\t\tmotion: {\n\t\t\t\t\t\t\tx: { type: \"tween\", duration: 500, easing: cubicInOut },\n\t\t\t\t\t\t\twidth: { type: \"tween\", duration: 500, easing: cubicInOut },\n\t\t\t\t\t\t\theight: { type: \"tween\", duration: 500, easing: cubicInOut },\n\t\t\t\t\t\t\ty: { type: \"tween\", duration: 500, easing: cubicInOut },\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\txAxis: { format: (d) => d.toLocaleDateString(\"en-US\", { day: \"numeric\" }) },\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{#snippet belowMarks()}\n\t\t\t\t\t<Highlight area={{ class: \"fill-muted\" }} />\n\t\t\t\t{/snippet}\n\t\t\t\t{#snippet tooltip()}\n\t\t\t\t\t<Chart.Tooltip\n\t\t\t\t\t\tclass=\"w-[150px]\"\n\t\t\t\t\t\tnameKey=\"visitors\"\n\t\t\t\t\t\tlabelFormatter={(d) =>\n\t\t\t\t\t\t\td.toLocaleDateString(\"en-US\", {\n\t\t\t\t\t\t\t\tmonth: \"short\",\n\t\t\t\t\t\t\t\tday: \"numeric\",\n\t\t\t\t\t\t\t\tyear: \"numeric\",\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t/>\n\t\t\t\t{/snippet}\n\t\t\t</BarChart>\n\t\t</Chart.Container>\n\t</Card.Content>\n\t<Card.Footer class=\"border-t\">\n\t\t<div class=\"text-sm\">\n\t\t\tYou had\n\t\t\t<span class=\"font-semibold\">{total.toLocaleString()}</span>\n\t\t\tvisitors for the month of June.\n\t\t</div>\n\t</Card.Footer>\n</Card.Root>\n",
			"type": "registry:component",
			"target": "calendar-27.svelte"
		}
	]
}